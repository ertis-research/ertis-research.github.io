{{ define "main" }}
{{ $css := resources.Get "css/landing_news.css" }}
<link rel="stylesheet" href="{{ $css.RelPermalink }}">

<section class="section py-8 px-4 mx-auto max-w-screen-xl">
  <h1 class="text-4xl tracking-tight font-extrabold text-center mb-8 text-gray-900 dark:text-white">{{ .Title }}</h1>
  <p class="text-center mb-12 text-gray-700 dark:text-gray-300 max-w-2xl mx-auto">{{ .Content | markdownify }}</p>
  <div class = "py-8 px-4 mx-auto max-w-screen-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 min-h-screen">
    {{ $slides := slice }}
    {{ range .Site.RegularPages }}
        {{ if eq .Section "news" }}
        {{ $slides = $slides | append . }}
        {{ end }}
    {{ end }}

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
        <!-- Columna izquierda: Lista de noticias -->
        <div class="lg:col-span-2">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="news-container">
            {{ range $page := $slides }}
            <div class="news-card bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-orange-500">
                <h3 class="text-xl font-semibold mb-2 text-gray-900 dark:text-white"><a href="{{ $page.RelPermalink }}" class="card-title">{{ $page.Title }}</a></h3>
                <p class="text-gray-700 dark:text-gray-300 mb-4">{{ $page.Summary | truncate 100 }}</p>
                <small class="text-gray-500 dark:text-gray-400">{{ $page.Date.Format "January 2, 2006" }}</small>
            </div>
            {{ end }}
        </div>
        </div>

        <!-- Columna derecha: Cuadrado con buscador -->
        <div class="lg:col-span-1">
        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 h-64 flex flex-col justify-center">
            <h3 class="text-lg font-semibold mb-4 text-gray-900 dark:text-white text-center">Search News</h3>
            <input type="text" id="news-search-input" placeholder="Search by title or content..." class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>
        </div>
    </div>
  </div>
</section>

<script>
document.getElementById('news-search-input').addEventListener('input', function() {
  const query = this.value.toLowerCase();
  const items = document.querySelectorAll('#news-container .news-card');
  items.forEach(item => {
    const text = item.textContent.toLowerCase();
    item.style.display = text.includes(query) ? '' : 'none';
  });
});
</script>
{{ end }}